# name: ci/cd devops
# on: 
#   push:
#     branches: [main]
# jobs: 
#   build:
#     runs-on: ubuntu-latest
#     steps:
#     - name: Checkout code 
#       uses: actions/checkout@v3

#     - name: Set up Docker Compose
#       uses: docker/setup-compose-action@v1
#       with:
#         version: latest
#     - name: install packages
#       run: |  
#         docker compose up --build

#     - name: Verify containers are running 
#       run: | 
#         if docker-compose ps | grep -q "Up"; then 
#           echo "✅ All containers are running" 
#         else 
#           echo "❌ Some containers failed to start" 
#           docker-compose logs 
#           exit 1 
#         fi  # +1 балл (Критерий 2) 
 name: ci/cd devops
 on: 
  push:
    branches: [main]
 jobs: 
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code 
      uses: actions/checkout@v3

    - name: Set up Docker Compose
      uses: docker/setup-compose-action@v1
      with:
        version: latest

    - name: Build and run containers  # Исправлено название шага
      run: |  
        # Опционально: проверьте наличие файла
        if [ ! -f Docker-compose.yaml ]; then
          echo "❌ Docker-compose.yaml not found"
          exit 1
        fi
        docker compose -f Docker-compose.yaml up --build

    - name: Verify containers are running 
      run: | 
        if docker compose ps | grep -q "Up"; then 
          echo "✅ All containers are running" 
        else 
          echo "❌ Some containers failed to start" 
          docker compose logs 
          exit 1 
        fi  # +1 балл (Критерий 2) git